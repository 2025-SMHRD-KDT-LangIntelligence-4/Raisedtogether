<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.smhrd.web.mapper.CareApplyMapper">
	<insert id="insertChild" parameterType="com.smhrd.web.entity.Child" useGeneratedKeys="true"
		keyProperty="childIdx">
		insert into t_child (parent_id, child_name, child_birthdate, child_gender,
		child_notes, child_behavior)
		values (#{parentId}, #{childName}, #{childBirthdate}, #{childGender},
		#{childNotes}, #{childBehavior})
	</insert>


	<select id="selectChildByParentId" parameterType="String"
		resultType="com.smhrd.web.entity.Child">
		SELECT child_name AS childName, child_birthdate AS childBirthdate,
		child_gender AS childGender, child_idx AS childIDX
		FROM t_child
		WHERE parent_id = #{parentId}
	</select>

	<delete id="deleteCareByChildIdx" parameterType="int">
		DELETE FROM t_care WHERE child_idx = #{childIdx}
	</delete>

	<delete id="deleteChild">
		delete from t_child
		where child_idx = #{childIdx}
	</delete>
	
	<insert id="insertCarePlace" parameterType="com.smhrd.web.entity.Care">
	    insert into t_care (parent_id, child_idx, care_place, care_address)
	    values (#{parentId}, #{childIdx}, #{carePlace}, #{careAddress2})
	</insert>
	
	<select id="selectCarePlace" resultType="com.smhrd.web.entity.Care" parameterType="com.smhrd.web.entity.Care">
		 select *
		 from t_care
		 where parent_id = #{parentId}
	</select>

</mapper>